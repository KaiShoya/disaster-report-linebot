<!DOCTYPE html>
<html lang="ja">

  <head>
    <meta charset="utf-8">
    <title>GoogleMapsAPIテスト</title>
  </head>

  <body>
    <div id="map" style="width:100%; height:600px;"></div>
    <script type="text/javascript">
      function initMap() {
        // 地図のズームと中心地を決める
        var mapOptions = {
          zoom: 14,
          center: new google.maps.LatLng(31.9076772, 131.4202434)
        }
        // マーカーを打つポイント
        var locations = JSON.parse(<?= locations ?>);

        var directionsDisplay = new google.maps.DirectionsRenderer();
        var map = new google.maps.Map(document.getElementById("map"), mapOptions);
        directionsDisplay.setMap(map);

        var markers = locations.map(function (location) {
          return new google.maps.Marker({
            position: location,
            map: map,
          });
        });
      }
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?callback=initMap&key="></script>
  </body>

</html>
